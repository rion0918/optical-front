# Proposal: Add Authentication System

## Overview

ユーザー認証システムを実装し、ランディングページからログイン/サインアップを経てカレンダーページへアクセスできるようにします。認証方法は「メールアドレス/パスワード」と「Google 認証」の 2 つをサポートします。

## Motivation

現在、アプリケーションにはユーザー認証機能が実装されていません。カレンダーアプリケーションとして、ユーザーごとのデータを管理し、セキュアなアクセス制御を実現するために認証システムが必要です。

## Goals

- メールアドレス/パスワードによる認証を実装
- Google OAuth による認証を実装
- JWT ベースのセッション管理を実装
- ログイン/サインアップページの実装
- 認証が必要なページへのアクセス制御
- 認証状態の管理(Context/Provider パターン)

## Non-Goals

- パスワードリセット機能(今回のスコープ外)
- 二要素認証(2FA)
- ソーシャル認証(Google 以外)
- アカウント削除機能の UI

## Success Criteria

- ユーザーがメールアドレスとパスワードでサインアップ・ログインできる
- ユーザーが Google アカウントでサインアップ・ログインできる
- 認証されたユーザーのみがカレンダーページにアクセスできる
- 認証されていないユーザーはランディングページにリダイレクトされる
- JWT トークンが適切に保存・管理される
- エラーが適切に処理され、ユーザーに HTTP ステータスコード付きで表示される

## Timeline

実装期間: 2 週間程度を想定

## Dependencies

- バックエンド API(現在未実装)とのインターフェース定義
- MSW でのモック API 実装

## Risks and Mitigations

| Risk                         | Mitigation                                                  |
| ---------------------------- | ----------------------------------------------------------- |
| バックエンド API が未実装    | MSW を使用したモック実装で先行開発                          |
| JWT 管理のセキュリティリスク | httpOnly ではなく localStorage を使用するが、XSS 対策を徹底 |
| Google OAuth 設定の複雑さ    | 開発環境用のテストクレデンシャルを使用                      |

## Open Questions

- [ ] API のベース URL(環境変数で管理?)
- [ ] JWT の有効期限とリフレッシュトークンの扱い
- [ ] Google OAuth のクライアント ID の管理方法
